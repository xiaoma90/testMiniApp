(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesPluginShop-manage_pro-manage_pro"],{"39e1":function(t,a,i){"use strict";var e=i("aa76"),n=i.n(e);n.a},4432:function(t,a,i){a=t.exports=i("2350")(!1),a.push([t.i,'uni-page-body[data-v-f858a2c2]{background:#f6f6f6}.container[data-v-f858a2c2]{padding:%?30?%;font-size:%?26?%}.formtitle[data-v-f858a2c2]{color:#000;font-weight:700;margin-bottom:%?20?%}.formcon[data-v-f858a2c2]{margin-bottom:%?30?%}.formcon[data-v-f858a2c2]:after{clear:both;content:"";display:block}.picker[data-v-f858a2c2],uni-input[data-v-f858a2c2]{margin:0}uni-input[data-v-f858a2c2]{padding:%?10?% %?20?%}.picker[data-v-f858a2c2]{padding:0 %?20?%}.textarea[data-v-f858a2c2]{border:solid 1px #eee;background:#fff;width:100%;box-sizing:border-box;padding:%?20?%}.image[data-v-f858a2c2]{width:%?140?%;height:%?140?%;float:left;margin-right:%?30?%;overflow:hidden;border:%?2?% solid #fff;position:relative}.image uni-image[data-v-f858a2c2]{width:100%;height:100%}uni-button[data-v-f858a2c2]{background:#09bb07;color:#fff}.delimg[data-v-f858a2c2]{position:absolute;right:0;top:0;background:#e33;color:#fff;font-size:%?22?%;padding:%?2?% %?6?%}.hide[data-v-f858a2c2]{display:none}uni-video[data-v-f858a2c2]{width:%?400?%;height:%?300?%;float:left}.chooseVideo[data-v-f858a2c2]{float:left;margin-left:%?30?%;background:#e33;color:#fff;font-size:%?22?%;padding:%?2?% %?6?%}\r\nbody.?%PAGE?%[data-v-f858a2c2]{background:#f6f6f6}',""])},"5a42":function(t,a,i){"use strict";var e=i("288e");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e(i("f499"));i("a481");i("2f62");var o=i("7131"),s={data:function(){return{$imgurl:this.$imgurl,needAuth:!1,needBind:!1,page_signs:"/pagesPluginShop/manage_pro/manage_pro",index:0,thumb:"",thumb_ok:"",id:"",hideAdd1:1,pagedata:[],host:"",video:"",cid:0,cateinfo:[],catelist:"",proInfo:"",imgs:[]}},onLoad:function(t){var a=this;this._baseMin(this),uni.setNavigationBarTitle({title:"商品详情"});var i=t.id?t.id:"";this.id=i;var e=0;o.h5login(e,function(){i>0?a._getProInfo(i):a.getcate()})},methods:{_getProInfo:function(t){var a=this;uni.request({url:a.$baseurl+"dopageshowShopPro",data:{id:t,uniacid:a.$uniacid,suid:uni.getStorageSync("suid")},success:function(t){t.data.data.images&&(a.pagedata=t.data.data.images),a.thumb_ok=t.data.data.thumb,a.thumb=t.data.data.thumb,a.proInfo=t.data.data,a.imgs=a.pagedata,a.pagedata=a.pagedata,a.cid=a.proInfo.cid,a.getcate(),console.log(a.thumb)}})},getcate:function(){var t=this;uni.request({url:t.$baseurl+"doPageGetGoodsCate",data:{uniacid:t.$uniacid,id:t.id},success:function(a){t.id;var i=a.data.data.arr,e=a.data.data.index;t.cateinfo=i,t.index=e,t.catelist=a.data.data.list}})},bindPickerChange:function(t){var a=this,i=t.detail.value;if(i>0)var e=i-1;for(var n=a.catelist,o=0,s=0,l=0;l<n.length;l++)if(0==l)e==l?s=n[l]["id"]:e<n[l]["sub"].length+1&&(s=n[l]["sub"][e-1]["id"]);else if(o+=n[l]["sub"].length+1,e<o+n[0]["sub"].length+1)for(var c=0,u=o+n[0]["sub"].length+1-n[l]["sub"].length-1;u<o+n[0]["sub"].length+1;u++)u==e&&(s=0==c?n[l]["id"]:n[l]["sub"][c-1]["id"]),c+=1;a.index=i,a.cid=s},choosethumb:function(){var t=this,a=t.$baseurl+"wxupimg";uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){uni.showLoading({title:"图片上传中"});var e=i.tempFilePaths;uni.uploadFile({url:a,formData:{uniacid:t.$uniacid},filePath:e[0],name:"file",success:function(a){var i=a.data;t.thumb=i,t.thumb_ok=i,t.hideAdd1=0,uni.hideLoading()}})}})},chooseZutu:function(){var t=this;uni.chooseImage({count:3,sizeType:["original"],sourceType:["album","camera"],success:function(a){a.tempFilePaths.length>0&&t._uploadImg(a.tempFilePaths,1,function(a){console.log(a);var i=t.host+a,e=t.pagedata;e.push(i),console.log(e),t.pagedata.length>2?(t.hideAdd=0,t.imgs=t.pagedata):(t.hideAdd=1,t.imgs=e),t.pagedata=e,console.log(t.pagedata)})}})},_uploadImg:function(t,a,i){var e=this;if(2==a)uni.uploadFile({url:e.$baseurl+"wxupimg",formData:{uniacid:e.$uniacid},filePath:t,name:"file",success:function(t){console.log("上传成功"),console.log(t),"function"==typeof i&&i(t.data)},fail:function(t){uni.showModal({title:"错误提示",content:"上传失败",showCancel:!1})}});else for(var n=0;n<t.length;n++)uni.uploadFile({url:e.$baseurl+"wxupimg",formData:{uniacid:e.$uniacid},filePath:t[n],name:"file",success:function(t){console.log("上传成功"),"function"==typeof i&&i(t.data)},fail:function(t){uni.showModal({title:"错误提示",content:"上传失败",showCancel:!1})}})},getBLen:function(t){return null==t?0:("string"!=typeof t&&(t+=""),t.replace(/[^\x00-\xff]/g,"01").length)},delimg:function(t){var a=this,i=t.currentTarget.dataset.id,e=a.pagedata;e.splice(i,1),a.imgs=e,a.pagedata=e},isInt:function(t){var a=/^\d+(?=\.{0,1}\d+$|$)/;return!!a.test(t)},formSubmit:function(t){var a=this,i=t.detail.value,e=a.cid;return 0==e?(uni.showModal({title:"提示",content:"请选择所属栏目",showCancel:!1}),!1):""==i["title"]?(uni.showModal({title:"提示",content:"请输入商品标题",showCancel:!1}),!1):a.getBLen(i.title)>100?(uni.showModal({title:"提示",content:"商品标题最多输入50个汉字",showCancel:!1}),!1):""==a.thumb_ok?(uni.showModal({title:"提示",content:"请上传商品缩略图",showCancel:!1}),!1):a.pagedata.length<1?(uni.showModal({title:"提示",content:"请至少上传一张商品组图",showCancel:!1}),!1):""==i["sellprice"]?(uni.showModal({title:"提示",content:"请输入商品售价",showCancel:!1}),!1):a.isInt(i.sellprice)?""==i["storage"]?(uni.showModal({title:"提示",content:"请输入商品库存",showCancel:!1}),!1):(console.log(989898989),console.log(a.pagedata),console.log((0,n.default)(a.pagedata)),void uni.request({url:a.$baseurl+"dopageaddPro",data:{title:i.title,num:i.num,pageview:i.pageview,buy_type:0,flag:0==i.flag?1:i.flag,kuaidi:0,rsales:i.rsales,sellprice:i.sellprice,marketprice:i.marketprice,storage:i.storage,descp:i.descp,images:(0,n.default)(a.pagedata),thumb:a.thumb,sid:uni.getStorageSync("mlogin"),id:a.id,uniacid:a.$uniacid,cid:a.cid},success:function(t){0==t.data.data?uni.showModal({title:"提示",content:"添加失败",showCancel:!1}):(uni.showToast({title:"添加/修改成功",icon:"success"}),setTimeout(function(){uni.redirectTo({url:"/pagesPluginShop/manage_prolist/manage_prolist"})},1e3))}})):(uni.showModal({title:"提示",content:"商品售价应为正数",showCancel:!1}),!1)}}};a.default=s},aa76:function(t,a,i){var e=i("4432");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("1a461bc4",e,!0,{sourceMap:!1,shadowMode:!1})},aab3:function(t,a,i){"use strict";i.r(a);var e=i("e76d"),n=i("fe70");for(var o in n)"default"!==o&&function(t){i.d(a,t,function(){return n[t]})}(o);i("39e1");var s=i("2877"),l=Object(s["a"])(n["default"],e["a"],e["b"],!1,null,"f858a2c2",null);a["default"]=l.exports},e76d:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return t.$imgurl?i("v-uni-view",{staticClass:"container"},[i("v-uni-form",{on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.formSubmit.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"row formtitle"},[t._v("排序")]),i("v-uni-view",{staticClass:"row formcon"},[i("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"text",placeholder:"序号越大越靠前，不填为0",name:"num",value:t.proInfo.num?t.proInfo.num:0}})],1),i("v-uni-view",{staticClass:"row formtitle"},[t._v("是否上架")]),i("v-uni-radio-group",{staticClass:"radio-group formcon",attrs:{name:"flag"}},[i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"1",checked:1==t.proInfo.flag?"true":""}}),t._v("上架")],1),i("v-uni-label",{staticClass:"radio",staticStyle:{"margin-left":"30rpx"}},[i("v-uni-radio",{attrs:{value:"2",checked:2==t.proInfo.flag?"true":""}}),t._v("下架")],1)],1),i("v-uni-view",{staticClass:"row formtitle"},[t._v("所属栏目")]),i("v-uni-view",{staticClass:"row formcon"},[i("v-uni-view",{staticClass:"section"},[i("v-uni-picker",{attrs:{value:t.index,range:t.cateinfo},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.bindPickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v("当前选择："+t._s(t.cateinfo[t.index]))])],1)],1)],1),i("v-uni-view",{staticClass:"row formtitle"},[t._v("标题")]),i("v-uni-view",{staticClass:"row formcon"},[t.proInfo.title?[i("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"text",placeholder:"标题",name:"title",value:t.proInfo.title}})]:[i("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"text",placeholder:"标题",name:"title"}})]],2),i("v-uni-view",{staticClass:"row formtitle"},[t._v("缩略图")]),i("v-uni-view",{staticClass:"image_content formcon"},[t.thumb?[t.hideAdd1?[i("v-uni-view",{staticClass:"image"},[i("v-uni-image",{staticClass:"moment_img",attrs:{src:t.proInfo.thumb},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.choosethumb.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"delimg",attrs:{"data-id":t.key},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.choosethumb.apply(void 0,arguments)}}},[t._v("更换")])],1)]:t._e(),[i("v-uni-view",{staticClass:"image"},[i("v-uni-image",{staticClass:"moment_img",attrs:{src:t.thumb},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.choosethumb.apply(void 0,arguments)}}})],1)]]:t._e(),[i("v-uni-image",{staticClass:"moment_img",style:{display:""==t.thumb?"none":"block"},attrs:{src:t.thumb},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.choosethumb.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"image",style:{display:0==t.hideAdd1?"none":"block"}},[i("v-uni-image",{staticClass:"moment_img",attrs:{src:t.$imgurl+"add.png"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.choosethumb.apply(void 0,arguments)}}})],1)]],2),i("v-uni-view",{staticClass:"row formtitle"},[t._v("产品组图")]),i("v-uni-view",{staticClass:"image_content formcon"},[t._l(t.imgs,function(a,e){return i("v-uni-view",{key:e,staticClass:"image"},[i("v-uni-image",{staticClass:"moment_img",attrs:{src:a}}),i("v-uni-view",{staticClass:"delimg",attrs:{"data-id":e},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.delimg.apply(void 0,arguments)}}},[t._v("删除")])],1)}),i("v-uni-view",{staticClass:"image",style:{display:t.imgs.length>2?"none":"block"}},[i("v-uni-image",{staticClass:"moment_img",attrs:{src:t.$imgurl+"add.png"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseZutu.apply(void 0,arguments)}}})],1)],2),i("v-uni-view",{staticClass:"row formtitle"},[t._v("售价")]),i("v-uni-view",{staticClass:"row formcon"},[t.proInfo.sellprice?[i("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"digit",placeholder:"售价",name:"sellprice",value:t.proInfo.sellprice}})]:[i("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"digit",placeholder:"售价",name:"sellprice"}})]],2),i("v-uni-view",{staticClass:"row formtitle"},[t._v("库存量")]),i("v-uni-view",{staticClass:"row formcon"},[t.proInfo.storage?[i("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"number",placeholder:"库存量",name:"storage",value:t.proInfo.storage}})]:[i("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"number",placeholder:"库存量",name:"storage"}})]],2),i("v-uni-view",{staticClass:"row formtitle"},[t._v("产品详情")]),i("v-uni-textarea",{staticClass:"textarea formcon",attrs:{name:"descp",placeholder:"产品详情",value:t.proInfo.descp}}),i("v-uni-button",{attrs:{"form-type":"submit"}},[t._v("确认发布/修改")])],1)],1):t._e()},n=[];i.d(a,"a",function(){return e}),i.d(a,"b",function(){return n})},fe70:function(t,a,i){"use strict";i.r(a);var e=i("5a42"),n=i.n(e);for(var o in e)"default"!==o&&function(t){i.d(a,t,function(){return e[t]})}(o);a["default"]=n.a}}]);