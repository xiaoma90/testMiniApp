(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-evaluate-evaluate"],{4386:function(s,t,e){t=s.exports=e("2350")(!1),t.push([s.i,"uni-page-body[data-v-e12bb352]{background-color:#fff;padding-bottom:%?100?%}.assess_header[data-v-e12bb352]{padding:%?20?% %?30?%;border-bottom:%?2?% solid #eee}.assess_header_img[data-v-e12bb352]{width:%?78?%;height:%?78?%;margin-right:%?66?%}.assess_header_text[data-v-e12bb352]{font-size:%?28?%;color:#434343;margin-right:%?114?%}.assess_header_text[data-v-e12bb352]:last-child{margin-right:0}.assess_header_text uni-text[data-v-e12bb352]{font-size:%?28?%;color:#969696;margin-right:%?10?%}.assess_header_text_on[data-v-e12bb352]{color:#ff610b}.assess_header_text_on uni-text[data-v-e12bb352]{color:#ff610b}.assess_textarea[data-v-e12bb352]{padding:%?16?% %?30?%;font-size:%?28?%;color:#434343;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;height:%?420?%}.assess_picturebox[data-v-e12bb352]{margin-top:%?20?%;font-size:0;padding:0 %?30?%;overflow:visible}.assess_picture[data-v-e12bb352]{display:inline-block;margin-right:%?16?%;position:relative;overflow:visible;background-color:#f8f8f8;width:%?160?%;height:%?160?%;margin-bottom:%?16?%;border-radius:%?16?%;vertical-align:bottom}.assess_picture_img[data-v-e12bb352]{width:%?160?%;height:%?160?%;border-radius:%?10?%;display:block}.assess_picture[data-v-e12bb352]:nth-child(4n){margin-right:0}.assess_picture_icon[data-v-e12bb352]{font-size:%?36?%;color:#ff610b;position:absolute;top:%?-14?%;right:%?-10?%}.assess_picture_img2[data-v-e12bb352]{width:%?75?%;height:%?61?%;position:absolute;left:0;top:0;bottom:0;right:0;display:block;margin:auto}.assess_empty[data-v-e12bb352]{height:%?16?%;width:100%;background-color:#f8f8f8}.assess_buy[data-v-e12bb352]{margin-top:%?22?%;padding:0 %?30?%}.assess_buy_left[data-v-e12bb352]{font-size:%?30?%;color:#b1b1b1;margin-top:%?4?%}.assess_buy_left_on[data-v-e12bb352]{color:#ff610b}.assess_buy_center[data-v-e12bb352]{font-size:%?28?%;color:#434343;margin-left:%?14?%}.assess_buy_right[data-v-e12bb352]{font-size:%?28?%;color:#b1b1b1;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:right}.assess_submit[data-v-e12bb352]{margin:%?106?% auto 0;width:%?440?%;height:%?80?%;background-color:#ff610b;text-align:center;line-height:%?80?%;border-radius:%?80?%;font-size:%?28?%;color:#fff}.nowcount[data-v-e12bb352]{position:absolute;right:%?30?%;bottom:%?10?%;color:#dfdfdf}body.?%PAGE?%[data-v-e12bb352]{background-color:#fff}",""])},"4e63":function(s,t,e){"use strict";e.r(t);var a=e("6c17"),i=e("7727");for(var n in i)"default"!==n&&function(s){e.d(t,s,function(){return i[s]})}(n);e("5633");var o=e("2877"),u=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,"e12bb352",null);t["default"]=u.exports},5633:function(s,t,e){"use strict";var a=e("9c7d"),i=e.n(a);i.a},"6c17":function(s,t,e){"use strict";var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return s.$imgurl?e("div",[s.count<2?[e("v-uni-view",{staticClass:"assess_header hbj"},[e("v-uni-image",{staticClass:"assess_header_img",attrs:{src:s.thumb,mode:"aspectFill"}}),0==s.add?e("v-uni-view",{staticClass:"assess_header_right hbj"},s._l(s.assessList,function(t,a){return e("v-uni-view",{key:a,staticClass:"assess_header_text",class:s.assess==t.id?"assess_header_text_on":"",attrs:{"data-id":t.id},on:{click:function(t){t=s.$handleEvent(t),s.chooseAssess(t)}}},[e("v-uni-text",{staticClass:"iconfont",class:t.icon}),s._v(s._s(t.name))],1)}),1):e("v-uni-view",{staticClass:"assess_header_right hbj",staticStyle:{color:"#b1b1b1"}},[s._v("追评无法重新选择评价等级")])],1),e("v-uni-view",{staticStyle:{position:"relative"}},[e("v-uni-textarea",{staticClass:"assess_textarea",attrs:{maxlength:"200",placeholder:"说说你的使用心得，分享给他们吧!"},on:{input:function(t){t=s.$handleEvent(t),s.evaluate(t)}}}),e("v-uni-view",{staticClass:"nowcount"},[s._v(s._s(s.nowcount)+"/200")])],1),e("v-uni-view",{staticClass:"assess_picturebox"},[s.imgs.length>0?s._l(s.imgs,function(t,a){return e("v-uni-view",{key:a,staticClass:"assess_picture"},[e("v-uni-image",{staticClass:"assess_picture_img",attrs:{src:t,mode:"aspectFill"}}),e("v-uni-view",{staticClass:"assess_picture_icon iconfont icon-x-guanbi2",attrs:{"data-index":a},on:{click:function(t){t=s.$handleEvent(t),s.delimg(t)}}})],1)}):s._e(),e("v-uni-view",{staticClass:"assess_picture"},[e("v-uni-image",{staticClass:"assess_picture_img2",attrs:{src:s.$imgurl+"camera.png",mode:"aspectFill"},on:{click:function(t){t=s.$handleEvent(t),s.chooseimg(t)}}})],1)],2),e("v-uni-view",{staticClass:"assess_empty"}),e("v-uni-view",{staticClass:"assess_buy hbj"},[0==s.add?e("v-uni-view",{staticClass:"assess_buy_left iconfont icon-x-dui2",class:1==s.anonymous?"assess_buy_left_on":"",on:{click:function(t){t=s.$handleEvent(t),s.chooseAnonymous(t)}}}):s._e(),0==s.add?e("v-uni-view",{staticClass:"assess_buy_center",on:{click:function(t){t=s.$handleEvent(t),s.chooseAnonymous(t)}}},[s._v("匿名")]):s._e(),e("v-uni-view",{staticClass:"assess_buy_right",style:0==s.add?"":"text-align:left"},[s._v("你的评价可以帮助其他小伙伴哦！")])],1),e("v-uni-view",{staticClass:"assess_submit",on:{click:function(t){t=s.$handleEvent(t),s.submit(t)}}},[s._v("发布")])]:s._e(),s.count>1?[s._l(s.duoPro,function(t,a){return[e("v-uni-view",{key:a+"_0",staticClass:"assess_header hbj"},[e("v-uni-image",{staticClass:"assess_header_img",attrs:{src:t.thumb,mode:"aspectFill"}}),0==s.add?e("v-uni-view",{staticClass:"assess_header_right hbj"},s._l(s.assessList,function(t,i){return e("v-uni-view",{key:i,staticClass:"assess_header_text",class:s.assess_duo[a]["id"]==t.id?"assess_header_text_on":"",attrs:{"data-id":t.id,"data-dkey":a},on:{click:function(t){t=s.$handleEvent(t),s.chooseAssess_duo(t)}}},[e("v-uni-text",{staticClass:"iconfont",class:t.icon}),s._v(s._s(t.name))],1)}),1):e("v-uni-view",{staticClass:"assess_header_right hbj",staticStyle:{color:"#b1b1b1"}},[s._v("追评无法重新选择评价等级")])],1),e("v-uni-view",{key:a+"_1",staticStyle:{position:"relative"}},[e("v-uni-textarea",{staticClass:"assess_textarea",attrs:{maxlength:"200",placeholder:"说说你的使用心得，分享给他们吧!","data-dkey":a},on:{input:function(t){t=s.$handleEvent(t),s.evaluate_duo_bt(t)}}}),e("v-uni-view",{staticClass:"nowcount"},[s._v(s._s(s.evaluate_duo[a]["nowcount"])+"/200")])],1),e("v-uni-view",{key:a+"_2",staticClass:"assess_picturebox",staticStyle:{"border-bottom":"2rpx solid #EEE"}},[s.imgs_duo[a].length>0?s._l(s.imgs_duo[a],function(t,i){return e("v-uni-view",{key:i,staticClass:"assess_picture"},[e("v-uni-image",{staticClass:"assess_picture_img",attrs:{src:t,mode:"aspectFill"}}),e("v-uni-view",{staticClass:"assess_picture_icon iconfont icon-x-guanbi2",attrs:{"data-dkey":a,"data-index":i},on:{click:function(t){t=s.$handleEvent(t),s.delimg_duo(t)}}})],1)}):s._e(),e("v-uni-view",{staticClass:"assess_picture"},[e("v-uni-image",{staticClass:"assess_picture_img2",attrs:{src:s.$imgurl+"camera.png",mode:"aspectFill","data-dkey":a},on:{click:function(t){t=s.$handleEvent(t),s.chooseimg_duo(t)}}})],1)],2),e("v-uni-view",{key:a+"_3",staticClass:"assess_buy hbj"},[0==s.add?e("v-uni-view",{staticClass:"assess_buy_left iconfont icon-x-dui2",class:1==s.anonymous_duo[a]["anonymous"]?"assess_buy_left_on":"",attrs:{"data-dkey":a},on:{click:function(t){t=s.$handleEvent(t),s.chooseAnonymous_duo(t)}}}):s._e(),0==s.add?e("v-uni-view",{staticClass:"assess_buy_center",attrs:{"data-dkey":a},on:{click:function(t){t=s.$handleEvent(t),s.chooseAnonymous_duo(t)}}},[s._v("匿名")]):s._e(),e("v-uni-view",{staticClass:"assess_buy_right",style:0==s.add?"":"text-align:left"},[s._v("你的评价可以帮助其他小伙伴哦！")])],1),e("v-uni-view",{key:a+"_4",staticClass:"assess_empty"})]}),e("v-uni-view",{staticClass:"assess_submit",on:{click:function(t){t=s.$handleEvent(t),s.submit_duo(t)}}},[s._v("发布")])]:s._e()],2):s._e()},i=[];e.d(t,"a",function(){return a}),e.d(t,"b",function(){return i})},7727:function(s,t,e){"use strict";e.r(t);var a=e("fd0c"),i=e.n(a);for(var n in a)"default"!==n&&function(s){e.d(t,s,function(){return a[s]})}(n);t["default"]=i.a},"9c7d":function(s,t,e){var a=e("4386");"string"===typeof a&&(a=[[s.i,a,""]]),a.locals&&(s.exports=a.locals);var i=e("4f06").default;i("23657f58",a,!0,{sourceMap:!1,shadowMode:!1})},fd0c:function(s,t,e){"use strict";var a=e("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(e("f499")),n=e("55f5"),o={data:function(){return{$imgurl:this.$imgurl,assess:1,assess_duo:[],assessList:[{id:1,icon:"icon-c-haoping",name:"好评"},{id:2,icon:"icon-c-zhongchaping",name:"中评"},{id:3,icon:"icon-c-zhongchaping",name:"差评"}],anonymous:0,order_id:"",count_sy:5,imgs:[],nowcount:0,evaluatecon:"",type:"",add:0,thumb:"",duoPro:"",count:1,evaluate_duo:[],imgs_duo:[],anonymous_duo:[],pid:0}},onLoad:function(s){var t=this,e=this,a=0;s.fxsid&&(e.fxsid=s.fxsid),s.type&&(e.type=s.type);var i=0;s.add&&(i=s.add,e.add=s.add),s.id&&(e.pid=s.id),s.order_id&&(e.order_id=s.order_id),0==i?uni.setNavigationBarTitle({title:"产品评价"}):uni.setNavigationBarTitle({title:"产品追评"}),this._baseMin(this),e.proinfo(),n.h5login(a,function(){},function(){t.needBind=!0})},onPullDownRefresh:function(){var s=this;s.proinfo(),uni.stopPullDownRefresh()},methods:{proinfo:function(){var s=this;uni.request({url:s.$baseurl+"doPageassesspro",data:{uniacid:s.$uniacid,order_id:s.order_id,type:s.type,pid:s.pid},success:function(t){s.thumb=t.data.data.thumb,s.pid=t.data.data.pid,s.duoPro=t.data.data,s.count=t.data.count;for(var e=0;e<s.duoPro.length;e++){var a={id:1};console.log(a),s.assess_duo.push(a);var i={evaluatecon:"",nowcount:0};s.evaluate_duo.push(i);var n=[];s.imgs_duo.push(n);var o={anonymous:0};s.anonymous_duo.push(o)}}})},chooseAssess:function(s){var t=s.currentTarget.dataset.id;this.assess=t},chooseAssess_duo:function(s){var t=s.currentTarget.dataset.id,e=s.currentTarget.dataset.dkey;this.assess_duo[e]["id"]=t,console.log(this.assess_duo)},chooseAnonymous:function(s){var t=this.anonymous;t=0==t?1:0,this.anonymous=t},chooseAnonymous_duo:function(s){var t=s.currentTarget.dataset.dkey,e=this.anonymous_duo[t].anonymous;e=0==e?1:0,this.anonymous_duo[t].anonymous=e},chooseimg:function(){var s=this,t=s.count_sy,e=s.imgs;t-=e.length;var a=s.zhixin;uni.chooseImage({count:t,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){a=!0,s.zhixin=a,uni.showLoading({title:"图片上传中"});var i=t.tempFilePaths,n=0,o=i.length,u=s.$baseurl+"wxupimg",c=function t(){uni.uploadFile({url:u,formData:{uniacid:s.$uniacid},filePath:i[n],name:"file",success:function(i){var u=i.data;e.push(u),s.imgs=e,n++,n<o?t():(a=!1,s.zhixin=a,uni.hideLoading())}})};c()}})},chooseimg_duo:function(s){var t=this,e=t.count_sy,a=s.currentTarget.dataset.dkey,i=t.imgs_duo[a];e-=i.length;var n=t.zhixin;uni.chooseImage({count:e,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(s){n=!0,t.zhixin=n,uni.showLoading({title:"图片上传中"});var e=s.tempFilePaths,o=0,u=e.length,c=t.$baseurl+"wxupimg",d=function s(){uni.uploadFile({url:c,formData:{uniacid:t.$uniacid},filePath:e[o],name:"file",success:function(e){var c=e.data;i.push(c),t.imgs_duo[a]=i,o++,o<u?s():(n=!1,t.zhixin=n,uni.hideLoading())}})};d()}})},delimg_duo:function(s){var t=this,e=s.currentTarget.dataset.dkey,a=s.currentTarget.dataset.index;t.imgs_duo[e].splice(a,1)},delimg:function(s){var t=this,e=s.currentTarget.dataset.index,a=t.imgs;a.splice(e,1),t.imgs=a},evaluate:function(s){var t=this,e=s.detail.value,a=s.detail.cursor;t.evaluatecon=e,t.nowcount=a},evaluate_duo_bt:function(s){var t=this,e=s.detail.value,a=s.detail.cursor,i=s.currentTarget.dataset.dkey;t.evaluate_duo[i]["evaluatecon"]=e,t.evaluate_duo[i]["nowcount"]=a},submit:function(){var s=this,t=s.assess,e=s.evaluatecon,a=s.imgs,n=s.anonymous;if(""==e)return uni.showModal({title:"提示",content:"评价不能为空",showCancel:!1}),!1;uni.request({url:s.$baseurl+"doPageEvaluateSub",cachetime:"30",data:{uniacid:s.$uniacid,assess:t,evaluatecon:e,imgs:(0,i.default)(a),anonymous:n,suid:uni.getStorageSync("suid"),order_id:s.order_id,pid:s.pid,type:s.type,add:s.add},success:function(s){1==s.data?uni.showModal({title:"提示",content:"评价提交成功",showCancel:!1,success:function(s){uni.navigateBack({delta:1})}}):uni.showModal({title:"提示",content:"评价提交失败"})},fail:function(s){}})},submit_duo:function(){for(var s=this,t=s.assess_duo,e=s.evaluate_duo,a=s.imgs_duo,n=s.anonymous_duo,o=0;o<e.length;o++){if(""==e[o].evaluatecon)return uni.showModal({title:"提示",content:"评价不能为空",showCancel:!1}),!1;e[o].evaluatecon}uni.request({url:s.$baseurl+"doPageDuoEvaluateSub",cachetime:"30",data:{uniacid:s.$uniacid,assess:(0,i.default)(t),evaluatecon:(0,i.default)(e),imgs:(0,i.default)(a),anonymous:(0,i.default)(n),suid:uni.getStorageSync("suid"),order_id:s.order_id,duoPro:(0,i.default)(s.duoPro),add:s.add},success:function(s){s.data?uni.showModal({title:"提示",content:"评价提交成功",showCancel:!1,success:function(s){uni.navigateBack({delta:1})}}):uni.showModal({title:"提示",content:"评价提交失败"})},fail:function(s){}})}}};t.default=o}}]);