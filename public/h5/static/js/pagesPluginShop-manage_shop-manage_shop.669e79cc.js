(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesPluginShop-manage_shop-manage_shop"],{"285e":function(a,t,e){var i=e("3697");"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var o=e("4f06").default;o("004a0b30",i,!0,{sourceMap:!1,shadowMode:!1})},3697:function(a,t,e){t=a.exports=e("2350")(!1),t.push([a.i,'uni-page-body[data-v-794f9826]{background:#f6f6f6}.container[data-v-794f9826]{padding:%?30?%;font-size:%?26?%}.formtitle[data-v-794f9826]{color:#000;font-weight:700;margin-bottom:%?20?%}.formcon[data-v-794f9826]{margin-bottom:%?30?%}.formcon[data-v-794f9826]:after{clear:both;display:block;content:""}.picker[data-v-794f9826],uni-input[data-v-794f9826]{margin:0}.textarea[data-v-794f9826]{border:solid 1px #eee;background:#fff;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?20?%;height:%?200?%}.image[data-v-794f9826]{width:%?140?%;height:%?140?%;float:left;margin-right:%?20?%;margin-bottom:%?20?%;overflow:hidden;border:%?2?% solid #fff;position:relative}.image uni-image[data-v-794f9826]{width:100%;height:100%}uni-button[data-v-794f9826]{background:#09bb07;color:#fff}.delimg[data-v-794f9826]{position:absolute;right:0;top:0;background:#e33;color:#fff;font-size:%?22?%;padding:%?2?% %?6?%}.choosebtn[data-v-794f9826]{margin:0;padding:%?3?% %?6?%;line-height:%?40?%;font-size:%?22?%;border-radius:%?6?%;border:none}.choosebtn[data-v-794f9826]:after{border:none}.placeholder-no-fix[data-v-794f9826]{padding:%?10?% %?20?%}body.?%PAGE?%[data-v-794f9826]{background:#f6f6f6}',""])},"779f":function(a,t,e){"use strict";e.r(t);var i=e("83e5"),o=e.n(i);for(var n in i)"default"!==n&&function(a){e.d(t,a,function(){return i[a]})}(n);t["default"]=o.a},"83e5":function(a,t,e){"use strict";var i=e("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(e("bd86"));e("a481"),e("7f7f");e("2f62");var n=e("2c90"),s={data:function(){return{$imgurl:this.$imgurl,needAuth:!1,needBind:!1,page_signs:"/pagesPluginShop/manage_index/manage_index",dataindex:[],logo_ok:"",bg_ok:"",address:"",pagedata:"",cateList:[],cateName:"",proInfo:[],logo:"",bg:"",cate:"",cateId:"",id:""}},onLoad:function(a){var t=this;this._baseMin(this),uni.setNavigationBarTitle({title:"商铺信息"});var e=0,i=uni.getStorageSync("mlogin");this.id=i,n.h5login(e,function(){t._getShopInfo(i)})},methods:{_getShopInfo:function(a){var t=this;uni.request({url:t.$baseurl+"dopageshopInfo",data:{id:a,uniacid:t.$uniacid},success:function(a){t.logo_ok=a.data.data[1].logo,t.bg_ok=a.data.data[1].bg,t.address=a.data.data[1].address;for(var e=[],i=a.data.data[1].images,o=0;o<i.length;o++){var n=t.host+i[o];e.push(n)}t.pagedata=e;var s=a.data.data[0];t.cateList=s;var r=[];for(o=0;o<s.length;o++)if(r.push(s[o].name),s[o].id==a.data.data[1].cid)var d=o;t.proInfo=a.data.data[1],t.imgs=t.pagedata,t.logo=t.logo_ok,t.bg=t.host+t.bg_ok,t.catelist=s,t.cateName=r,t.cate=d,t.cateId=a.data.data[1].cid}})},formSubmit:function(a){var t;console.log(1111);for(var e=this,i=a.detail.value,n=[],s=e.pagedata,r=0;r<s.length;r++){var d=s[r].replace(e.host,"");n.push(d)}uni.request({url:e.$baseurl+"dopageeditShop",data:(t={username:i.username,password:i.password,title:i.title,descp:i.descp,cid:e.cateId,intro:i.intro,worktime:i.worktime,name:i.name,tel:i.tel,address:e.address,latitude:e.latitude,longitude:e.longitude},(0,o.default)(t,"title",i.title),(0,o.default)(t,"images",n),(0,o.default)(t,"logo",e.logo_ok),(0,o.default)(t,"bg",e.bg_ok),(0,o.default)(t,"sid",uni.getStorageSync("mlogin")),(0,o.default)(t,"id",e.id),(0,o.default)(t,"uniacid",e.$uniacid),t),success:function(a){0==a.data.data?uni.showModal({title:"提示",content:"修改失败",showCancel:!1}):uni.redirectTo({url:"/pagesPluginShop/manage_index/manage_index"})}})},chooseimage:function(){var a=this,t=a.$baseurl+"wxupimg";uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){uni.showLoading({title:"图片上传中"});var i=e.tempFilePaths;uni.uploadFile({url:t,formData:{uniacid:a.$uniacid},filePath:i[0],name:"file",success:function(t){var e=t.data;a.imgs=e,a.pagedata.push(e),uni.hideLoading()}})}})},chooselogo:function(){var a=this,t=a.$baseurl+"wxupimg";uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){uni.showLoading({title:"图片上传中"});var i=e.tempFilePaths;uni.uploadFile({url:t,formData:{uniacid:a.$uniacid},filePath:i[0],name:"file",success:function(t){t.data&&(a.logo_ok=t.data);var e=t.data;a.logo=e,a.pagedata.push(e),uni.hideLoading()}})}})},changePicker:function(a){var t=a.detail.value,e=this.cateList;this.cateId=e[t].id,this.cate=t},getlocation:function(){var a=this;uni.chooseLocation({success:function(t){a.address=t.address,a.latitude=t.latitude,a.longitude=t.longitude}})}}};t.default=s},"9eb4":function(a,t,e){"use strict";var i=e("285e"),o=e.n(i);o.a},df1b:function(a,t,e){"use strict";var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return a.$imgurl?e("v-uni-view",{staticClass:"container"},[e("v-uni-form",{on:{submit:function(t){t=a.$handleEvent(t),a.formSubmit(t)}}},[e("v-uni-view",{staticClass:"row formtitle"},[a._v("用户名")]),e("v-uni-view",{staticClass:"row formcon"},[e("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"text","auto-focus":"",placeholder:"商户登录时使用",name:"username",value:a.proInfo.username}})],1),e("v-uni-view",{staticClass:"row formtitle"},[a._v("密码")]),e("v-uni-view",{staticClass:"row formcon"},[e("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"text",placeholder:"商户登录时使用",name:"password",value:a.proInfo.password}})],1),e("v-uni-view",{staticClass:"row formtitle"},[a._v("分类")]),e("v-uni-view",{staticClass:"formcon"},[e("v-uni-view",{staticStyle:{float:"left"}},[a._v("当前选择")]),e("v-uni-picker",{staticStyle:{float:"right"},attrs:{name:"cid","data-id":a.cateList.id,range:a.cateName},on:{change:function(t){t=a.$handleEvent(t),a.changePicker(t)}}},[e("v-uni-view",{staticClass:"weui-input"},[a._v(a._s(a.cateName[a.cate]))])],1)],1),e("v-uni-view",{staticClass:"row formtitle"},[a._v("LOGO")]),e("v-uni-view",{staticClass:"image_content formcon"},[e("v-uni-view",{staticClass:"image"},[e("v-uni-image",{staticClass:"moment_img",attrs:{src:a.logo},on:{click:function(t){t=a.$handleEvent(t),a.chooselogo(t)}}})],1),e("v-uni-view",{staticClass:"image",style:{display:a.logo?"none":"block"}},[e("v-uni-image",{staticClass:"moment_img",attrs:{src:a.$imgurl+"add.png"},on:{click:function(t){t=a.$handleEvent(t),a.chooselogo(t)}}})],1)],1),e("v-uni-view",{staticClass:"row formtitle"},[a._v("店铺名称")]),e("v-uni-view",{staticClass:"row formcon"},[e("v-uni-input",{staticClass:"m-wrap placeholder-no-fix",attrs:{type:"text",placeholder:"请填写店铺名称",name:"name",value:a.proInfo.name}})],1),e("v-uni-view",{staticClass:"row formtitle"},[a._v("客户介绍")]),e("v-uni-textarea",{staticClass:"textarea formcon",attrs:{name:"descp",placeholder:"客户介绍",value:a.proInfo.descp}}),e("v-uni-button",{attrs:{"form-type":"submit"}},[a._v("保存")])],1)],1):a._e()},o=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return o})},dfe7:function(a,t,e){"use strict";e.r(t);var i=e("df1b"),o=e("779f");for(var n in o)"default"!==n&&function(a){e.d(t,a,function(){return o[a]})}(n);e("9eb4");var s=e("2877"),r=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"794f9826",null);t["default"]=r.exports}}]);