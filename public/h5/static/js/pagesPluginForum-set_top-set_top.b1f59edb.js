(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesPluginForum-set_top-set_top"],{"06c4":function(e,t,i){"use strict";i.r(t);var a=i("9f37"),n=i("5c94");for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);i("ae92");var o=i("2877"),r=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"38ee79e3",null);t["default"]=r.exports},"2e5b":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("55f5"),n={data:function(){return{$imgurl:this.$imgurl,fid:0,rid:0,stick_money:0,stick_days:0,userMoney:0,returnpage:2,allmoney:0,baseinfo:"",needAuth:!1,needBind:!1,pay_type:1,show_pay_type:0,alipay:1,wxpay:1,money:0}},onLoad:function(e){var t=this,i=e.id;this.id=i,this._baseMin(this),this.fid=e.fid,this.rid=e.rid,this.returnpage=e.returnpage;var n=0;e.fxsid&&(n=e.fxsid),this.fxsid=n,a.h5login(n,function(){t.getSet(i)})},methods:{getSet:function(){var e=this;uni.setNavigationBarTitle({title:"置顶"}),e.getForumSet()},getForumSet:function(){var e=this;uni.request({url:e.$baseurl+"doPageForumSet",data:{uniacid:e.$uniacid},success:function(t){e.stick_money=t.data.data.stick_money,e.getUserMoney()}})},getStickDays:function(e){var t=this,i=e.detail.value,a=t.stick_money*i;a=a.toFixed(2),t.stick_days=i,t.allmoney=a},getUserMoney:function(){var e=this;uni.request({url:e.$baseurl+"doPageGetUserMoney",data:{uniacid:e.$uniacid,suid:uni.getStorageSync("suid")},success:function(t){e.userMoney=t.data.data}})},formSubmit:function(e){var t=this,i=t.stick_days;if(0==i)return uni.showModal({title:"提示",content:"请输入置顶天数",showCancel:!1}),!1;var a=t.stick_money,n=e.detail.formId,s=t.userMoney;a>0?uni.request({url:t.$baseurl+"doPageForumOrder",data:{uniacid:t.$uniacid,release_money:0,stick_days:i,stick_money:a,suid:uni.getStorageSync("suid"),formId:n},success:function(e){0!=e.data&&(t.orderid=e.data.orderid,1*s>=i*a?uni.showModal({title:"请注意",content:"您的余额为"+s+"元，本次将扣除"+i*a+"元",success:function(e){e.confirm&&t.setStick(1)}}):(t.setStick(2),t.showpay()))},fail:function(e){}}):t.setStick(1)},setStick:function(e){var t=this;uni.request({url:t.$baseurl+"doPageSetStick",data:{uniacid:t.$uniacid,rid:t.rid,stick_money:t.stick_money,stick_days:t.stick_days,orderid:t.orderid,haspay:e,suid:uni.getStorageSync("suid")},success:function(e){console.log(e),1==e.data.data?uni.showModal({title:"提示",content:"置顶成功",showCancel:!1,success:function(e){uni.navigateBack({delta:t.returnpage})}}):2==e.data.data&&uni.showModal({title:"提示",content:"置顶失败",showCancel:!1})}})},closeAuth:function(){this.needAuth=!1,this._checkBindPhone(this)},closeBind:function(){this.needBind=!1,this.getPic()},changealipay:function(){this.pay_type=1},showpay:function(){this.money=this.stick_days*this.stick_money-this.userMoney;var e=this;uni.request({url:this.$baseurl+"doPageGetH5payshow",data:{uniacid:this.$uniacid,suid:uni.getStorageSync("suid")},success:function(t){0==t.data.data.ali&&0==t.data.data.wx?uni.showModal({title:"提示",content:"请联系管理员设置支付参数",showCancel:!1,success:function(e){return!1}}):(0==t.data.data.ali?(e.alipay=0,e.pay_type=2):(e.alipay=1,e.pay_type=1),0==t.data.data.wx?e.wxpay=0:e.wxpay=1,e.show_pay_type=1)}})},changewxpay:function(){this.pay_type=2},close_pay_type:function(){this.show_pay_type=0},h5topay:function(){var e=this.pay_type;1==e?this._alih5pay(this,this.money,4,this.orderid):2==e&&this._wxh5pay(this,this.money,"settop",this.orderid),this.show_pay_type=0}}};t.default=n},"5c94":function(e,t,i){"use strict";i.r(t);var a=i("2e5b"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);t["default"]=n.a},"60b7":function(e,t,i){var a=i("ba70");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("2c41185c",a,!0,{sourceMap:!1,shadowMode:!1})},"9f37":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.$imgurl?i("v-uni-view",[e.needAuth?i("auth",{attrs:{needAuth:e.needAuth},on:{closeAuth:function(t){t=e.$handleEvent(t),e.closeAuth(t)}}}):e._e(),e.needBind?i("bindPhone",{attrs:{needBind:e.needBind},on:{closeBind:function(t){t=e.$handleEvent(t),e.closeBind(t)}}}):e._e(),i("v-uni-view",{staticClass:"set_top_money hbj"},[i("v-uni-view",{staticClass:"set_top_left flex1"},[e._v("付费置顶每天金额")]),i("v-uni-view",{staticClass:"set_top_right"},[e._v("￥"),i("v-uni-text",[e._v(e._s(e.stick_money))])],1)],1),i("v-uni-view",{staticClass:"set_top_money hbj"},[i("v-uni-view",{staticClass:"set_top_day"},[e._v("置顶天数")]),i("v-uni-input",{staticClass:"set_top_input flex1",attrs:{placeholder:"请填写置顶天数"},on:{input:function(t){t=e.$handleEvent(t),e.getStickDays(t)}}})],1),i("v-uni-view",{staticStyle:{height:"20rpx",background:"#F8F8F8"}}),i("v-uni-view",{staticClass:"allmoney hbj"},[i("v-uni-view",{staticClass:"allmoney_left flex1"},[e._v("合计金额")]),i("v-uni-view",{staticClass:"allmoney_right"},[e._v("￥"),i("v-uni-text",[e._v(e._s(e.allmoney))])],1)],1),i("v-uni-view",{staticClass:"allmoney hbj"},[i("v-uni-view",{staticClass:"allmoney_left flex1"},[e._v("账户余额")]),i("v-uni-view",{staticClass:"allmoney_right"},[e._v("￥"),i("v-uni-text",[e._v(e._s(e.userMoney))])],1)],1),i("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)}}},[i("v-uni-button",{staticClass:"relase_btn",attrs:{formType:"submit"}},[e._v("立即支付")])],1),1==e.show_pay_type?i("v-uni-view",{staticClass:"zhezhao_z",staticStyle:{display:"block"}},[i("v-uni-view",{staticClass:"t_w"},[i("v-uni-view",{staticClass:"tanchu_view"},[i("v-uni-image",{staticClass:"close",attrs:{src:e.$imgurl+"close.png",mode:""},on:{click:function(t){t=e.$handleEvent(t),e.close_pay_type(t)}}}),i("v-uni-text",[e._v("支付方式")]),1==e.wxpay?i("v-uni-view",{staticStyle:{"border-bottom":"1px solid #e9e6e6"},on:{click:function(t){t=e.$handleEvent(t),e.changewxpay(t)}}},[i("v-uni-view",{staticClass:"view_left"},[i("v-uni-image",{attrs:{src:e.$imgurl+"wx.png",mode:""}}),i("v-uni-text",[e._v("微信支付")])],1),1==e.pay_type?i("v-uni-view",{staticClass:"view_right"},[i("v-uni-image",{attrs:{src:e.$imgurl+"chk2.png"}})],1):e._e(),2==e.pay_type?i("v-uni-view",{staticClass:"view_right"},[i("v-uni-image",{attrs:{src:e.$imgurl+"chk1.png",id:"chk"}})],1):e._e()],1):e._e(),1==e.alipay?i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.changealipay(t)}}},[i("v-uni-view",{staticClass:"view_left"},[i("v-uni-image",{attrs:{src:e.$imgurl+"zfb.png",mode:""}}),i("v-uni-text",[e._v("支付宝支付")])],1),1==e.pay_type?i("v-uni-view",{staticClass:"view_right"},[i("v-uni-image",{attrs:{src:e.$imgurl+"chk1.png",id:"chk"}})],1):e._e(),2==e.pay_type?i("v-uni-view",{staticClass:"view_right"},[i("v-uni-image",{attrs:{src:e.$imgurl+"chk2.png"}})],1):e._e()],1):e._e(),i("v-uni-button",{staticClass:"btn_submit",on:{click:function(t){t=e.$handleEvent(t),e.h5topay(t)}}},[e._v("确认支付￥"),i("v-uni-text",[e._v(e._s(e.money))])],1)],1)],1)],1):e._e()],1):e._e()},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},ae92:function(e,t,i){"use strict";var a=i("60b7"),n=i.n(a);n.a},ba70:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'uni-page-body[data-v-38ee79e3]{background:#fff}.hbj[data-v-38ee79e3]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.flex1[data-v-38ee79e3]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.set_top_money[data-v-38ee79e3]{height:%?88?%;border-bottom:%?2?% solid #eee;padding:0 %?30?%}.set_top_left[data-v-38ee79e3]{font-size:%?28?%;color:#434343}.set_top_right[data-v-38ee79e3]{font-size:%?14?%;color:#838383}.set_top_right uni-text[data-v-38ee79e3]{font-family:Arial,Helvetica,sans-serif;font-size:%?28?%;color:#838383}.set_top_day[data-v-38ee79e3]{font-size:%?28?%;color:#838383}.set_top_input[data-v-38ee79e3]{border:0;padding:0;margin:0;font-size:%?24?%;color:#c4c4c4;text-align:right;height:auto}.allmoney[data-v-38ee79e3]{padding:%?30?% %?30?% %?0?% %?30?%}.allmoney_left[data-v-38ee79e3]{font-size:%?28?%;color:#2f74fd}.allmoney_right[data-v-38ee79e3]{font-size:%?14?%;color:#2f74fd}.allmoney_right uni-text[data-v-38ee79e3]{font-family:Arial,Helvetica,sans-serif;font-size:%?28?%}.relase_btn[data-v-38ee79e3]{margin:%?40?% auto 0;width:%?440?%;height:%?80?%;text-align:center;border-radius:%?80?%;background-color:#2f74fd;line-height:%?80?%;color:#fff;font-size:%?28?%}.zhezhao_z[data-v-38ee79e3]{position:fixed;width:%?750?%;height:100%;top:0;background:rgba(0,0,0,.3);overflow:hidden;z-index:99}.zhezhao_z .t_w[data-v-38ee79e3]{position:relative;z-index:100;overflow:visible;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.zhezhao_z .tanchu_view[data-v-38ee79e3]{width:80%;margin:auto;overflow:hidden;background-color:#fff;border-radius:%?10?%;padding-top:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:center;position:relative}#chk[data-v-38ee79e3]{width:%?70?%;height:%?70?%;margin-right:%?-6?%}.zhezhao_z .tanchu_view>uni-text[data-v-38ee79e3]{font-size:%?44?%;font-weight:500;color:#333;height:%?100?%;line-height:%?100?%}.zhezhao_z .tanchu_view>uni-view[data-v-38ee79e3]{height:%?100?%;line-height:%?100?%;overflow:visible;margin:%?20?% %?40?%}.zhezhao_z .tanchu_view>uni-view[data-v-38ee79e3]:after{clear:both;content:"";display:block}.view_left[data-v-38ee79e3]{float:left}.view_right[data-v-38ee79e3]{float:right}.view_right>uni-image[data-v-38ee79e3]{width:%?60?%;height:%?60?%;vertical-align:middle}.zhezhao_z .tanchu_view>uni-view[data-v-38ee79e3]:after{clear:both;content:"";display:block}.view_left>uni-image[data-v-38ee79e3]{width:%?50?%;height:%?50?%;display:inline-block;vertical-align:middle;margin-right:%?30?%}.view_left>uni-text[data-v-38ee79e3]{font-size:%?36?%;color:#333;font-weight:500}.zhezhao_z .btn_submit[data-v-38ee79e3]{width:100%;height:%?110?%;line-height:%?110?%;background-color:#2f74fd;color:#fff;border:none;border-radius:%?10?%;font-size:%?38?%;margin:%?60?% auto 0;border-radius:0}uni-button[data-v-38ee79e3]:after{border:none}.zhezhao_z .btn_submit>uni-text[data-v-38ee79e3]{font-size:%?50?%}.close[data-v-38ee79e3]{width:%?40?%;height:%?40?%;position:absolute;top:%?50?%;right:%?30?%}body.?%PAGE?%[data-v-38ee79e3]{background:#fff}',""])}}]);